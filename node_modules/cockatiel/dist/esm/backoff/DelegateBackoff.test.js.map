{"version":3,"file":"DelegateBackoff.test.js","sourceRoot":"","sources":["../../../src/backoff/DelegateBackoff.test.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,MAAM,EAAE,MAAM,MAAM,CAAC;AAC9B,OAAO,EAAE,eAAe,EAAE,MAAM,gBAAgB,CAAC;AACjD,OAAO,EAAE,eAAe,EAAE,MAAM,mBAAmB,CAAC;AAEpD,QAAQ,CAAC,iBAAiB,EAAE,GAAG,EAAE;IAC/B,EAAE,CAAC,gDAAgD,EAAE,GAAG,EAAE;QACxD,MAAM,CAAC,GAAG,IAAI,eAAe,CAAS,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QAClD,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;IAC1C,CAAC,CAAC,CAAC;IAEH,EAAE,CAAC,kCAAkC,EAAE,GAAG,EAAE;QAC1C,MAAM,CAAC,GAAG,IAAI,eAAe,CAAC,CAAC,CAAC,EAAE,QAAgB,CAAC,EAAE,EAAE;YACrD,MAAM,CAAC,GAAG,KAAK,GAAG,KAAK,CAAC;YACxB,OAAO,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC;QAChC,CAAC,CAAC,CAAC;QAEH,eAAe,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC,CAAC;IAC9C,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["import { expect } from 'chai';\nimport { expectDurations } from './Backoff.test';\nimport { DelegateBackoff } from './DelegateBackoff';\n\ndescribe('DelegateBackoff', () => {\n  it('passes through the context and sets next delay', () => {\n    const b = new DelegateBackoff<number>(v => v * 2);\n    expect(b.next(4)!.duration).to.equal(8);\n  });\n\n  it('captures and sets delegate state', () => {\n    const b = new DelegateBackoff((_, state: number = 3) => {\n      const n = state * state;\n      return { delay: n, state: n };\n    });\n\n    expectDurations(b, [9, 81, 6561, 43046721]);\n  });\n});\n"]}